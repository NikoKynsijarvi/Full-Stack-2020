{"version":3,"sources":["services/persons.js","components/Notifications.js","components/personform.js","components/name.js","components/filter.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","PersonForm","props","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Name","name","number","Filter","newName2","handleNameChange2","namesToShow","map","key","Names","persons","onClick","window","confirm","personService","initialPersons","console","log","setPersons","setErrorMessage","setTimeout","App","useState","setNewName","setNewNumber","showAll","setNewName2","errorMessage","useEffect","results","filter","length","pop","nameObject","event","target","preventDefault","returnedName","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4a1b8c51.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n\tconst request = axios.get(baseUrl);\r\n\treturn request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n\tconst request = axios.post(baseUrl, newObject);\r\n\treturn request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject);\r\n\treturn request.then((response) => response.data);\r\n};\r\nconst deleteThis = (id) => {\r\n\tconst request = axios.delete(`${baseUrl}/${id}`);\r\n\treturn request.then((response) => response.data);\r\n};\r\nexport default {\r\n\tgetAll,\r\n\tcreate,\r\n\tupdate,\r\n\tdeleteThis,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n\tif (message === null) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => (\r\n\t<form onSubmit={props.addName}>\r\n\t\t<div>\r\n\t\t\tname: <input value={props.newName} onChange={props.handleNameChange} />\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\tnumber:{\" \"}\r\n\t\t\t<input value={props.newNumber} onChange={props.handleNumberChange} />\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<button type=\"submit\">add</button>\r\n\t\t</div>\r\n\t</form>\r\n);\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Name = ({ name }) => {\r\n\treturn (\r\n\t\t<li>\r\n\t\t\t{name.name} {name.number}\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\nexport default Name;\r\n","import React from \"react\";\r\nimport Name from \"./name\";\r\n\r\nconst Filter = (props) => (\r\n\t<div>\r\n\t\t<form>\r\n\t\t\t<div>\r\n\t\t\t\tfilter with:\r\n\t\t\t\t<input value={props.newName2} onChange={props.handleNameChange2} />\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t\t<ul>\r\n\t\t\t{props.namesToShow.map((name) => (\r\n\t\t\t\t<Name key={name.name} name={name} />\r\n\t\t\t))}\r\n\t\t</ul>\r\n\t</div>\r\n);\r\n\r\nexport default Filter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notifications\";\r\nimport PersonForm from \"./components/personform\";\r\nimport Filter from \"./components/filter\";\r\nimport \"./index.css\";\r\n\r\nconst Names = (props) =>\r\n\tprops.persons.map((name) => (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\t{\" \"}\r\n\t\t\t\t{name.name} {name.number}{\" \"}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tvar result = window.confirm(\"delete \" + name.name + \"?\");\r\n\t\t\t\t\t\tif (result === true) {\r\n\t\t\t\t\t\t\tpersonService\r\n\t\t\t\t\t\t\t\t.deleteThis(name.id)\r\n\r\n\t\t\t\t\t\t\t\t.then((initialPersons) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(initialPersons);\r\n\r\n\t\t\t\t\t\t\t\t\tpersonService.getAll().then((initialPersons) => {\r\n\t\t\t\t\t\t\t\t\t\tprops.setPersons(initialPersons);\r\n\r\n\t\t\t\t\t\t\t\t\t\tprops.setErrorMessage(`Deleted ${name.name} `);\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tprops.setErrorMessage(null);\r\n\t\t\t\t\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tdelete\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t));\r\n\r\nconst App = () => {\r\n\tconst [persons, setPersons] = useState([]);\r\n\tconst [newName, setNewName] = useState(\"\");\r\n\tconst [newNumber, setNewNumber] = useState(\"\");\r\n\tconst [showAll, setShowAll] = useState(false);\r\n\tconst [newName2, setNewName2] = useState(\"\");\r\n\tconst [errorMessage, setErrorMessage] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tpersonService.getAll().then((initialPersons) => {\r\n\t\t\tsetPersons(initialPersons);\r\n\t\t\tconsole.log(initialPersons);\r\n\t\t});\r\n\t}, []);\r\n\tconst results = persons.filter((name) => name.name === newName);\r\n\tconsole.log(results);\r\n\tif (results.length > 1) {\r\n\t\tsetNewName(\"\");\r\n\t\tvar nimet = persons.map((name) => name.name);\r\n\t\tconsole.log(results);\r\n\t\tpersonService.deleteThis(persons.pop().id).then((initialPersons) => {});\r\n\t\tvar id = results[0].id;\r\n\t\tconsole.log(id);\r\n\t\tvar r = window.confirm(\r\n\t\t\tnewName +\r\n\t\t\t\t\" \" +\r\n\t\t\t\t\"is already added to phonebook, replace old number with a new one?\"\r\n\t\t);\r\n\t\tif (r === true) {\r\n\t\t\tvar nameObject = {\r\n\t\t\t\tname: newName,\r\n\t\t\t\tnumber: newNumber,\r\n\t\t\t\tid: id,\r\n\t\t\t};\r\n\t\t\tpersonService.update(id, nameObject).then((initialPersons) => {\r\n\t\t\t\tpersonService.getAll().then((initialPersons) => {\r\n\t\t\t\t\tsetPersons(initialPersons);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tsetErrorMessage(\r\n\t\t\t\t`Changed ${nameObject.name} number to ${nameObject.number} `\r\n\t\t\t);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetErrorMessage(null);\r\n\t\t\t}, 5000);\r\n\t\t}\r\n\t}\r\n\tconst addName = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst nameObject = {\r\n\t\t\tname: newName,\r\n\t\t\tnumber: newNumber,\r\n\r\n\t\t\tid: persons[persons.length - 1].id + 1,\r\n\t\t};\r\n\r\n\t\tpersonService\r\n\t\t\t.create(nameObject)\r\n\t\t\t.then((returnedName) => {\r\n\t\t\t\tsetPersons(persons.concat(returnedName));\r\n\t\t\t\tsetNewName(\"\");\r\n\t\t\t\tsetNewNumber(\"\");\r\n\t\t\t\tconsole.log(\"joo\");\r\n\t\t\t\tsetErrorMessage(`Added ${nameObject.name} `);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetErrorMessage(null);\r\n\t\t\t\t}, 5000);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(error.response.data);\r\n\t\t\t\tif (nameObject.number.length < 8) {\r\n\t\t\t\t\tsetErrorMessage(`${newNumber} is too short`);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage(null);\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t\tsetNewName(\"\");\r\n\t\t\t\t\tsetNewNumber(\"\");\r\n\t\t\t\t} else if (nameObject.name.length < 3) {\r\n\t\t\t\t\tsetErrorMessage(`${newName} is too short, give longer name`);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage(null);\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t\tsetNewName(\"\");\r\n\t\t\t\t\tsetNewNumber(\"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetErrorMessage(\"Name must be unique\");\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage(null);\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t\tsetNewName(\"\");\r\n\t\t\t\t\tsetNewNumber(\"\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst handleNameChange = (event) => {\r\n\t\tsetNewName(event.target.value);\r\n\t};\r\n\tconst handleNumberChange = (event) => {\r\n\t\tsetNewNumber(event.target.value);\r\n\t};\r\n\tconst handleNameChange2 = (event) => {\r\n\t\tsetNewName2(event.target.value);\r\n\t};\r\n\r\n\tconst namesToShow = showAll\r\n\t\t? persons\r\n\t\t: persons.filter((name) => name.name === newName2);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2>Phonebook</h2>\r\n\t\t\t<Notification message={errorMessage} />\r\n\t\t\t<Filter\r\n\t\t\t\tnewName2={newName2}\r\n\t\t\t\thandleNameChange2={handleNameChange2}\r\n\t\t\t\tnamesToShow={namesToShow}\r\n\t\t\t/>\r\n\r\n\t\t\t<h2>Add a new</h2>\r\n\t\t\t<PersonForm\r\n\t\t\t\taddName={addName}\r\n\t\t\t\tnewName={newName}\r\n\t\t\t\tnewNumber={newNumber}\r\n\t\t\t\thandleNumberChange={handleNumberChange}\r\n\t\t\t\thandleNameChange={handleNameChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<h2>Numbers</h2>\r\n\t\t\t{}\r\n\r\n\t\t\t<Names\r\n\t\t\t\tpersons={persons}\r\n\t\t\t\tsetPersons={setPersons}\r\n\t\t\t\tsetErrorMessage={setErrorMessage}\r\n\t\t\t\tnewName2={newName2}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}